A8255_CON EQU 0606H
A8255_A EQU 0600H
A8255_B EQU 0602H
A8255_C EQU 0604H
DATA	SEGMENT
	TABLE	DB	3FH
			DB	06H
			DB	5BH
			DB	4FH
			DB	66H
			DB	6DH
			DB	7DH
			DB	07H
			DB	7FH
			DB	6FH
DATA	ENDS
CODE	SEGMENT
	ASSUME	DS:DATA,CS:CODE
START:	MOV	AX,DATA
		MOV	DS,AX
		LEA	SI,TABLE
		MOV	DX,A8255_CON
		MOV	AL,89H
		OUT	DX,AL
		
AA1:	MOV	DX,A8255_C
		IN	AL,DX
		MOV	CL,AL
		MOV	BH,0
		MOV	BL,100
AA2:	CMP	CL,BL
		JB	AA3
		SUB	CL,BL
		INC	BH
		JMP	AA2
AA3:	MOV	BL,BH
		MOV	BH,0
		MOV	AL,[BX+SI]
		MOV	DX,A8255_B
		OUT	DX,AL
		MOV	AL,11110111B
		MOV	DX,A8255_A
		OUT	DX,AL
		CALL	DELAY
		MOV	BH,0
		MOV	BL,10
AA4:	CMP	CL,BL
		JB	AA5
		SUB	CL,BL
		INC	BH
		JMP	AA4
AA5:	MOV	BL,BH
		MOV	BH,0
		MOV	AL,[BX+SI]
		MOV	DX,A8255_B
		OUT	DX,AL
		MOV	DX,A8255_A
		MOV	AL,11101111B
		OUT	DX,AL
		CALL	DELAY
		MOV	BL,CL
		MOV	BH,0
		MOV	AL,[BX+SI]
		MOV	DX,A8255_B
		OUT	DX,AL
		MOV	AL,11011111B
		MOV	DX,A8255_A
		OUT	DX,AL
		CALL	DELAY
		JMP	AA1
		
		HLT

DELAY	PROC	NEAR
		PUSH	CX
		MOV	CX,0FFH
XX1:	LOOP	XX1	
		POP	CX
		RET
DELAY	ENDP
CODE	ENDS
END	START
		
					